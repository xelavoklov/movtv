<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>xelavoklov</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; background: #f0f0f0; }
        .post-container { 
            width: 100%; max-width: 600px; min-height: 200px; 
            margin-bottom: 20px; background: #fff; border-radius: 8px;
        }
    </style>
</head>
<body>

<!-- Контейнер, куда будут добавляться посты -->
<div id="feed"></div>

<!-- Служебный элемент, за которым следим для подгрузки новых постов -->
<div id="sentinel"></div>

<script>
    // Массив ID ваших постов (можно генерировать автоматически)
    const postIds = [1,2,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,96,97,98,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139]; 
    let currentIndex = 0;
    const batchSize = 10; // Сколько постов грузить за раз

    function loadMorePosts() {
        const feed = document.getElementById('feed');
        const nextBatch = postIds.slice(currentIndex, currentIndex + batchSize);
        
        nextBatch.forEach(id => {
            const container = document.createElement('div');
            container.className = 'post-container';
            
            // Создаем скрипт виджета вручную
            const script = document.createElement('script');
            script.async = true;
            script.src = "https://telegram.org/js/telegram-widget.js?22";
            script.setAttribute('data-telegram-post', `xelavoklo/${id}`);
            script.setAttribute('data-width', '100%');
            script.setAttribute('data-userpic', 'true');
            script.setAttribute('data-color', '29B127');
            script.setAttribute('data-dark-color', '72E350');
            
            container.appendChild(script);
            feed.appendChild(container);
        });

        currentIndex += batchSize;
        
        // Если посты закончились, убираем слежку
        if (currentIndex >= postIds.length) {
            observer.unobserve(document.getElementById('sentinel'));
        }
    }

    // Настройка "ленивой подгрузки" через Intersection Observer
    const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            loadMorePosts();
        }
    }, { rootMargin: '400px' }); // Начинаем грузить за 400px до того, как пользователь доскроллит

    observer.observe(document.getElementById('sentinel'));
</script>

</body>
</html>